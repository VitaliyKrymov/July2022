<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>mini project</title>
</head>
<body>
<script>
    //     В index.html
    //     1 получить массив объектов user с endpoint`а https://jsonplaceholder.typicode.com/users
    // 2 Вывести id,name всех user в index.html. Отдельный блок для каждого user.
    // 3 Добавить каждому блоку кнопку/ссылку , при клике на которую происходит переход на страницу user-details.html, которая имеет детальную информацию про объект на который кликнули
    function gotoLink(link) {
        location.href = link.value
    }

    fetch('https://jsonplaceholder.typicode.com/users')
        .then((response) => response.json())
        .then(usersArr => {
            let users = [...usersArr];
            for (let i = 0; i < 1000000000; i++) {
            }
            for (const user of users) {

                let div = document.createElement('div');
                div.innerText = `${user.id} ${user.address.street}`;
                let btn = document.createElement('button');
                btn.innerText = 'user details';

                btn.addEventListener('click', (event) => {
                    let myWindow = window.open("user-details.html", "user-details", "width=500, height=1200");
                    myWindow.document.write(`<p>id- ${user.id}</p>`,
                        `<p> name- ${user.name}</p>`,
                        `<p> user.name - ${user.username}</p>`,
                        `<p> email - ${user.email}</p>`,
                        '<p> address:</p>',
                        `<p> street - ${user.address.street}</p>`,
                        `<p> suite - ${user.address.suite}</p>`,
                        `<p> city - ${user.address.city}</p>`,
                        `<p> zipcode - ${user.address.zipcode}</p>`,
                        '<p> geo:</p>',
                        `<p> lat - ${user.address.geo.lat}</p>`,
                        `<p> lng - ${user.address.geo.lng}</p>`,
                        `<p> phone - ${user.phone}</p>`,
                        `<p> website - ${user.website}</p>`,
                        '<p> company:</p>',
                        `<p> name - ${user.company.name}</p>`,
                        `<p> catchPhrase - ${user.company.catchPhrase}</p>`,
                        `<p> bs - ${user.company.bs}</p>`,
                        `<div></div>`,
                        `<ul></ul>`
                    );

                    let buttonPost = document.createElement('button');
                    buttonPost.innerText = 'post of current user';

                    let postsBtn = myWindow.document.getElementsByTagName('div')[0];
                    postsBtn.appendChild(buttonPost)

                    buttonPost.onclick = function () {
                        buttonPost.hidden = true;
                        fetch('https://jsonplaceholder.typicode.com/users/' + `${user.id}` + '/posts')
                            .then((response) => response.json())
                            .then(postsArr => {
                                let posts = [...postsArr];
                                console.log(posts);

                                for (const post of posts) {
                                    let postTitle = post.title;
                                    let oneTitle = myWindow.document.createElement('p');
                                    let ul = myWindow.document.getElementsByTagName("ul")[0];
                                    oneTitle.innerText = postTitle;
                                    ul.append(oneTitle)

                                    let buttonPostDetails = document.createElement('button');
                                    buttonPostDetails.innerText = 'post-details';
                                    ul.append(buttonPostDetails)
                                    buttonPostDetails.onclick= ()=> {
                                      let  win = window.open("posts-details.html", "_blank", "location=yes,height=570,width=520,scrollbars=yes,status=yes");
                                        win.document.write('<div>glgg</div>');
                                    }

                                }

                            })
                    }


                })

                document.body.appendChild(div);
                div.append(btn);


            }
        });
    //
    // На странице user-details.html:
    // 4 Вывести всю, без исключения, информацию про объект user на кнопку/ссылку которого был совершен клик ранее.
    // 5 Добавить кнопку "post of current user", при клике на которую, появляются title всех постов текущего юзера
    // (для получения постов используйте эндпоинт https://jsonplaceholder.typicode.com/users/USER_ID/posts)
    // 6 Каждому посту добавить кнопку/ссылку, при клике на которую происходит переход на страницу post-details.html, которая имеет детальную информацию про текущий пост.
    //
    // На странице post-details.html:
    // 7 Вывести всю, без исключения, информацию про объект post на кнопку/ссылку которого был совершен клик ранее.
    // 8 Ниже информации про пост, вывести все комментарии текущего поста (эндпоинт для получения информации - https://jsonplaceholder.typicode.com/posts/POST_ID/comments)
    //
    // Стилизация проекта -
    // index.html - все блоки с user - по 2 в ряд. кнопки/ссылки находяться под информацией про user.
    // user-details.html - блок с информацией про user вверху страницы. Кнопка ниже, на 90% ширины страницы, по центру.
    // блоки с краткой информацией про post - в ряд по 5 объектов.
    // post-details.html - блок с информацией про пост вверху. Комментарии - по 4 в ряд.
    // Все без исключения элементы, который характеризируют user,post,comment  визуализировать, так, что бы было видно их блоки (дать задний фон + margin. Иными словами - крайне четкая сетка)


</script>


</body>
</html>